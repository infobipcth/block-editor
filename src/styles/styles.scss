@use "sass:math";
@use 'sass:color';

// Breakpoints
$break-xhuge: 1920px;
$break-huge: 1440px;
$break-wide: 1280px;
$break-xlarge: 1080px;
$break-large: 960px;   // admin sidebar auto folds
$break-medium: 782px;  // adminbar goes big
$break-small: 600px;
$break-mobile: 480px;
$break-zoomed-in: 280px;

// Grayscale & Colors
$gray-900: #1e1e1e;
$gray-800: #2f2f2f;
$gray-700: #757575;   // Meets 4.6:1 (4.5:1 is minimum) text contrast against white.
$gray-600: #949494;   // Meets 3:1 UI or large text contrast against white.
$gray-400: #ccc;
$gray-300: #ddd;      // Used for most borders.
$gray-200: #e0e0e0;   // Used sparingly for light borders.
$gray-100: #f0f0f0;   // Used for light gray backgrounds.

// Infobip colors
// Base Colors
$transparent: transparent;
$current: currentColor;
$black: #1b1a19;
$white: #fff; // <-- This fixes the $white in WP components

// Orange
$orange-900: #fc6423;
$orange-800: #fc7537;
$orange-500: #fca772;
$orange-100: #ffe4cc;

// Grey
$grey-800: #2d2c2b;
$grey-700: #494847;
$grey-600: #6d6c6c;
$grey-500: #969695;

// Dark Blue
$dark-blue-950: #0c1b2c;
$dark-blue-900: #17283a;
$dark-blue-850: #26334a;
$dark-blue-800: #3d4c66;
$dark-blue-750: #7484a3;

// Bright Blue
$hyperlink: #3980ea;
$bright-blue-600: #9eb2ff;
$bright-blue-500: #c8d4ff;
$bright-blue-400: #e3e7ff;

// Off White
$off-white: #eef2fc;

// Light Blue
$light-blue-300: #d0dcf2;
$light-blue-250: #e7ecf7;
$light-blue-200: #eef2fc;
$light-blue-150: #f2f5fa;
$light-blue-100: #f6f9fe;

// Dark Green
$dark-green-900: #053133;
$dark-green-800: #143e3f;
$dark-green-700: #214c41;
$dark-green-600: #496a68;
$dark-green-500: #91b3b1;

// Bright Green
$bright-green-300: #cbea99;
$bright-green-200: #edffcd;
$bright-green-100: #f6ffe8;

// Dark Pink
$dark-pink-900: #21151e;
$dark-pink-800: #32232f;
$dark-pink-700: #483745;
$dark-pink-600: #604155;
$dark-pink-500: #9f759f;

// Bright Pink
$bright-pink-300: #ffa8eb;
$bright-pink-200: #ffd4f5;
$bright-pink-100: #ffe6f9;

// F1 Red
$f1-red: #fa0c00;

// Placeholder opacities & alert colors
$dark-gray-placeholder: rgba($gray-900, 0.62);
$medium-gray-placeholder: rgba($gray-900, 0.55);
$light-gray-placeholder: rgba($white, 0.65);
$alert-yellow: #f0b849;
$alert-red: #cc1818;
$alert-green: #4ab866;

$synced-block-color: #7a00df;

// Deprecated vars
$dark-theme-focus: $white;  // Focus color when the theme is dark.

// Typography
$default-font: -apple-system, BlinkMacSystemFont,"Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell,"Helvetica Neue", sans-serif; // Todo: deprecate in favor of $family variables
$default-line-height: 1.4; // Todo: deprecate in favor of $line-height tokens

// Font sizes
$font-size-x-small: 11px;
$font-size-small: 12px;
$font-size-medium: 13px;
$font-size-large: 15px;
$font-size-x-large: 20px;
$font-size-2x-large: 32px;

// Font line heights
$font-line-height-x-small: 16px;
$font-line-height-small: 20px;
$font-line-height-medium: 24px;
$font-line-height-large: 28px;
$font-line-height-x-large: 32px;
$font-line-height-2x-large: 40px;

// Font weights
$font-weight-regular: 400;
$font-weight-medium: 500;

// Font families
$font-family-headings: -apple-system, "system-ui", "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
$font-family-body: -apple-system, "system-ui", "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
$font-family-mono: Menlo, Consolas, monaco, monospace;

// Grid system
$grid-unit: 8px;
$grid-unit-05: 0.5 * $grid-unit;    // 4px
$grid-unit-10: 1 * $grid-unit;      // 8px
$grid-unit-15: 1.5 * $grid-unit;    // 12px
$grid-unit-20: 2 * $grid-unit;      // 16px
$grid-unit-30: 3 * $grid-unit;      // 24px
$grid-unit-40: 4 * $grid-unit;      // 32px
$grid-unit-50: 5 * $grid-unit;      // 40px
$grid-unit-60: 6 * $grid-unit;      // 48px
$grid-unit-70: 7 * $grid-unit;      // 56px
$grid-unit-80: 8 * $grid-unit;      // 64px

// Radius scale
$radius-x-small: 1px;   // Applied to elements like buttons nested within primitives like inputs.
$radius-small: 2px;     // Applied to most primitives.
$radius-medium: 4px;    // Applied to containers with smaller padding.
$radius-large: 8px;     // Applied to containers with larger padding.
$radius-full: 9999px;   // For pills.
$radius-round: 50%;     // For circles and ovals.

// Elevation scale
$elevation-x-small: 0 1px 1px rgba($black, 0.03), 0 1px 2px rgba($black, 0.02), 0 3px 3px rgba($black, 0.02), 0 4px 4px rgba($black, 0.01);
$elevation-small: 0 1px 2px rgba($black, 0.05), 0 2px 3px rgba($black, 0.04), 0 6px 6px rgba($black, 0.03), 0 8px 8px rgba($black, 0.02);
$elevation-medium: 0 2px 3px rgba($black, 0.05), 0 4px 5px rgba($black, 0.04), 0 12px 12px rgba($black, 0.03), 0 16px 16px rgba($black, 0.02);
$elevation-large: 0 5px 15px rgba($black, 0.08), 0 15px 27px rgba($black, 0.07), 0 30px 36px rgba($black, 0.04), 0 50px 43px rgba($black, 0.02);

// Dimensions
$icon-size: 24px;
$button-size: 36px;
$button-size-next-default-40px: 40px; // transitionary variable for next default button size
$button-size-small: 24px;
$button-size-compact: 32px;
$header-height: 60px;
$panel-header-height: $grid-unit-60;
$nav-sidebar-width: 300px;
$admin-bar-height: 32px;
$admin-bar-height-big: 46px;
$admin-sidebar-width: 160px;
$admin-sidebar-width-big: 190px;
$admin-sidebar-width-collapsed: 36px;
$modal-min-width: 350px;
$modal-width-small: 384px;
$modal-width-medium: 512px;
$modal-width-large: 840px;
$spinner-size: 16px;
$canvas-padding: $grid-unit-20;

// Mobile specific styles
$mobile-text-min-font-size: 16px;

// Editor styles
$sidebar-width: 300px;
$content-width: 840px;
$wide-content-width: 1100px;
$widget-area-width: 700px;
$secondary-sidebar-width: 350px;
$editor-font-size: 16px;
$default-block-margin: 28px; // This value provides a consistent, contiguous spacing between blocks.
$text-editor-font-size: 15px;
$editor-line-height: 1.8;
$editor-html-font: $font-family-mono;

// Block & Editor UI
$block-toolbar-height: $grid-unit-60;
$border-width: 1px;
$border-width-focus-fallback: 2px; // This exists as a fallback, ideally overridden by var(--wp-admin-border-width-focus) unless in some SASS math cases.
$border-width-tab: 1.5px;
$helptext-font-size: 12px;
$radio-input-size: 16px;
$radio-input-size-sm: 24px; // Width & height for small viewports.
$block-padding: 14px; // Used to define space between block footprint and surrounding borders.
$radius-block-ui: $radius-small;
$shadow-popover: $elevation-x-small;
$shadow-modal: $elevation-large;
$default-font-size: $font-size-medium;

// Block paddings
$block-bg-padding--v: 1.25em;
$block-bg-padding--h: 2.375em;

// React Native specific
$mobile-header-toolbar-height: 44px;
$mobile-header-toolbar-expanded-height: 52px;
$mobile-floating-toolbar-height: 44px;
$mobile-floating-toolbar-margin: 8px;
$mobile-color-swatch: 48px;
$mobile-block-toolbar-height: 44px;
$dimmed-opacity: 1;
$block-edge-to-content: 16px;
$solid-border-space: 12px;
$dashed-border-space: 6px;
$block-selected-margin: 3px;
$block-selected-border-width: 1px;
$block-selected-padding: 0;
$block-selected-child-margin: 5px;
$block-selected-to-content: $block-edge-to-content - $block-selected-margin - $block-selected-border-width;

$z-layers: (
	".block-editor-block-list__block::before": 0,
	".block-editor-block-list__block.is-selected": 20,
	".block-editor-block-switcher__arrow": 1,
	".block-editor-block-list__block {core/image aligned wide or fullwide}": 20,
	".block-library-classic__toolbar": 31, // When scrolled to top this toolbar needs to sit over block-editor-block-toolbar
	".components-form-toggle__input": 1,
	".editor-text-editor__toolbar": 1,

	// These next three share a stacking context
	".block-library-template-part__selection-search": 2, // higher sticky element
	".block-library-query-pattern__selection-search": 2, // higher sticky element

	// These next two share a stacking context
	".interface-complementary-area .components-panel" : 0, // lower scrolling content
	".interface-complementary-area .components-panel__header": 1, // higher sticky element

	".components-modal__header": 10,
	".edit-post-meta-boxes-area.is-loading::before": 1,
	".edit-post-meta-boxes-area .spinner": 5,
	".components-popover__close": 5,
	".block-editor-block-list__insertion-point": 6,
	".block-editor-warning": 5,
	".block-editor-url-input__suggestions": 30,
	".edit-post-layout__footer": 30,
	".interface-interface-skeleton__header": 30,
	".interface-interface-skeleton__content": 20,
	".edit-widgets-header": 30,

	".wp-block-cover.is-placeholder .components-placeholder.is-large": 1, // Cover block resizer component inside a large placeholder.
	// These z-index are now used only for a deprecated version of the cover block.
	".wp-block-cover__inner-container": 1, // InnerBlocks area inside cover image block.
	".wp-block-cover.has-background-dim::before": 1, // Overlay area inside block cover need to be higher than the video background.
	".wp-block-cover__image-background": 0, // Image background inside cover block.
	".wp-block-cover__video-background": 0, // Video background inside cover block.

	".wp-block-template-part__placeholder-preview-filter-input": 1,

	// Fixed position appender:
	".block-editor-block-list__block .block-list-appender": 2,

	// Navigation menu dropdown.
	".has-child .wp-block-navigation__submenu-container": 28,
	".has-child:hover .wp-block-navigation__submenu-container": 29,

	// Active pill button
	".components-button {:focus or .is-primary}": 1,

	// The draggable element should show up above the entire UI
	".components-draggable__clone": 1000000000,

	".block-editor-block-list__block .reusable-block-edit-panel *": 1,

	// Show drop zone above most standard content, but below any overlays
	".components-drop-zone": 40,
	".components-drop-zone__content": 50,

	// The floated blocks should be above the other blocks to allow selection.
	"{core/image aligned left or right} .wp-block": 21,

	// Needs to be below media library that has a z-index of 160000.
	"{core/video track editor popover}": 160000 - 10,

	// Needs to be below media library (.media-model) that has a z-index of 160000.
	".block-editor-format-toolbar__image-popover": 160000 - 10,
	// Below the media library backdrop (.media-modal-backdrop), which has a z-index of 159900.
	".block-editor-global-styles-background-panel__popover": 159900 - 10,

	// The toolbar, when contextual, should be above any adjacent nested block click overlays.
	".block-editor-block-contextual-toolbar": 61,

	// Ensures content overlay appears higher than resize containers used for image/video/etc.
	".block-editor-block-list__block.has-block-overlay": 10,

	// Query block setup state.
	".block-editor-block-pattern-setup .pattern-slide": 100,
	".block-editor-block-pattern-setup .{next,previous}-slide": 101,
	".block-editor-block-pattern-setup .active-slide": 102,

	// Show sidebar above wp-admin navigation bar for mobile viewports:
	// #wpadminbar { z-index: 99999 }
	".interface-interface-skeleton__sidebar": 100000,
	".editor-layout__toggle-sidebar-panel": 100000,
	".edit-widgets-sidebar": 100000,
	".editor-post-publish-panel": 100001,
	// For larger views, the wp-admin navbar dropdown should be at top of
	// the Publish Post sidebar.
	".editor-post-publish-panel {greater than small}": 99998,

	// For larger views, the wp-admin navbar dropdown should be on top of
	// the multi-entity saving sidebar.
	".edit-site-editor__toggle-save-panel": 100000,

	// Show sidebar in greater than small viewports above editor related elements
	// but below #adminmenuback { z-index: 100 }
	".interface-interface-skeleton__sidebar {greater than small}": 90,
	".edit-widgets-sidebar {greater than small}": 90,

	// Show interface skeleton footer above interface skeleton drawer
	".interface-interface-skeleton__footer": 90,

	// Above the block list and the header.
	".block-editor-block-popover": 31,

	// Below the block toolbar.
	".block-editor-grid-visualizer": 30,

	// Show snackbars above everything (similar to popovers)
	".components-snackbar-list": 100000,

	// Show modal under the wp-admin menus and the popover
	".components-modal__screen-overlay": 100000,

	// Show popovers above wp-admin menus and submenus and sidebar:
	// #adminmenuwrap { z-index: 9990 }
	".components-popover": 1000000,

	// Should be above the popover (dropdown)
	".reusable-blocks-menu-items__convert-modal": 1000001,
	".patterns-menu-items__convert-modal": 1000001,
	".fields-create-template-part-modal": 1000001,
	".block-editor-block-lock-modal": 1000001,
	".block-editor-template-part__selection-modal": 1000001,
	".block-editor-block-rename-modal": 1000001,
	".edit-site-list__rename-modal": 1000001,
	".dataviews-action-modal": 1000001,
	".editor-action-modal": 1000001,
	".editor-post-template__swap-template-modal": 1000001,
	".editor-post-template__create-template-modal": 1000001,
	".edit-site-template-panel__replace-template-modal": 1000001,
	".fields-controls__template-modal": 1000001,

	// Note: The ConfirmDialog component's z-index is being set to 1000001 in packages/components/src/confirm-dialog/styles.ts
	// because it uses emotion and not sass. We need it to render on top its parent popover.

	// ...Except for popovers immediately beneath wp-admin menu on large breakpoints
	".components-popover.block-editor-inserter__popover": 99999,
	".components-popover.table-of-contents__popover": 99998,
	".components-popover.interface-more-menu__content": 99998,
	".components-popover.more-menu__content": 99998,
	".components-popover.block-editor-rich-text__inline-format-toolbar": 99998,
	".components-popover.block-editor-warning__dropdown": 99998,

	".components-autocomplete__results": 1000000,

	".skip-to-selected-block": 100000,
	".interface-interface-skeleton__actions": 100000,
	".edit-site-layout__actions": 100000,

	// The focus styles of the region navigation containers should be above their content.
	".is-focusing-regions {region} :focus::after": 1000000,

	// Show NUX tips above popovers, wp-admin menus, submenus, and sidebar:
	".nux-dot-tip": 1000001,

	// Show tooltips above NUX tips, wp-admin menus, submenus, and sidebar:
	".components-tooltip": 1000002,

	// Make sure corner handles are above side handles for ResizableBox component
	".components-resizable-box__handle": 2,
	".components-resizable-box__side-handle": 2,
	".components-resizable-box__corner-handle": 2,

	// Make sure block manager sticky category titles appear above the options
	".block-editor-block-manager__category-title": 1,
	// And block manager sticky disabled block count is higher still
	".block-editor-block-manager__disabled-blocks-count": 2,

	// Needs to appear below other color circular picker related UI elements.
	".components-circular-option-picker__option-wrapper::before": -1,

	".components-circular-option-picker__option.is-pressed": 1,
	// Needs to be higher than .components-circular-option-picker__option.is-pressed.
	".components-circular-option-picker__option.is-pressed + svg": 2,

	// The following two indexes are needed so that the swatches (and their tooltips)
	// always render on top of the rest of the component's UI.
	".components-circular-option-picker__swatches": 1,
	"> *:not(.components-circular-option-picker__swatches)": 0,

	// Appear under the customizer heading UI, but over anything else.
	".customize-widgets__topbar": 8,

	// Appear under the topbar.
	".customize-widgets__block-toolbar": 7,

	// Site editor layout
	".edit-site-page-header": 2,
	".edit-site-page-content": 1,
	".edit-site-templates__dataviews-list-pagination": 2,
	".edit-site-layout__canvas-container": 2,
	".edit-site-layout__sidebar": 1,
	".edit-site-layout__canvas-container.is-resizing::after": 100,
	// Title needs to appear above other UI the section content.
	".edit-site-sidebar-navigation-screen__title-icon": 1,

	// Ensure modal footer actions appear above modal contents
	".editor-start-template-options__modal__actions": 1,
	".editor-start-page-options__modal__actions": 1,

	// Ensure checkbox + actions don't overlap table header
	".dataviews-view-table thead": 1,

	// Ensure selection checkbox stays above the preview field.
	".dataviews-view-grid__card .dataviews-selection-checkbox": 1,

	// Ensure footer stays above the preview field.
	".dataviews-footer": 2,

	// Needs to be below media library (.media-model) that has a z-index of 160000.
	".components-popover.components-dropdown__content.dataforms-layouts-panel__field-dropdown": 160000 - 10,
);

// Functions
/**
 *  Converts a hex value into the rgb equivalent.
 *
 * @param {string} hex - the hexadecimal value to convert
 * @return {string} comma separated rgb values
 */
@function hex-to-rgb($hex) {
	@return color.channel($hex, "red", $space: rgb), color.channel($hex, "green", $space: rgb), color.channel($hex, "blue", $space: rgb);
}

@function z-index( $key ) {
	@if map-has-key( $z-layers, $key ) {
		@return map-get( $z-layers, $key );
	}

	@error "Error: Specified z-index `#{$key}` does not exist in the mapping";
}

// Animations
@mixin keyframes($name) {
	@keyframes #{$name} {
		@content;
	}
}

@mixin animation__fade-in($speed: 0.08s, $delay: 0s, $easing: linear) {
	@include keyframes(__wp-base-styles-fade-in) {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	@media not (prefers-reduced-motion) {
		animation: __wp-base-styles-fade-in $speed $easing $delay;
		animation-fill-mode: forwards;
	}
}

@mixin animation__fade-out($speed: 0.08s, $delay: 0s, $easing: linear) {
	@include keyframes(__wp-base-styles-fade-out) {
		from {
			opacity: 1;
		}
		to {
			opacity: 0;
		}
	}

	@media not (prefers-reduced-motion) {
		animation: __wp-base-styles-fade-out $speed $easing $delay;
		animation-fill-mode: forwards;
	}
}

@mixin edit-post__fade-in-animation($speed: 0.08s, $delay: 0s) {
	@warn "The `edit-post__fade-in-animation` mixin is deprecated. Use `animation__fade-in` instead.";
	@include animation__fade-in($speed, $delay);
}

@mixin admin-scheme($color-primary) {
	// Define RGB equivalents for use in rgba function.
	// Hexadecimal css vars do not work in the rgba function.
	--wp-admin-theme-color: #{$color-primary};
	--wp-admin-theme-color--rgb: #{hex-to-rgb($color-primary)};
	// Darker shades.
	--wp-admin-theme-color-darker-10: #{color.adjust($color-primary, $lightness: 5%)};
	--wp-admin-theme-color-darker-10--rgb: #{hex-to-rgb(color.adjust($color-primary, $lightness: 5%))};
	--wp-admin-theme-color-darker-20: #{color.adjust($color-primary, $lightness: 10%)};
	--wp-admin-theme-color-darker-20--rgb: #{hex-to-rgb(color.adjust($color-primary, $lightness: 10%))};

	// Focus style width.
	// Avoid rounding issues by showing a whole 2px for 1x screens, and 1.5px on high resolution screens.
	--wp-admin-border-width-focus: 2px;

	@media ( -webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
		& {
			--wp-admin-border-width-focus: 1.5px;
		}
	}
}

@mixin long-content-fade($direction: right, $size: 20%, $color: #fff, $edge: 0, $z-index: false) {
	content: "";
	display: block;
	position: absolute;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	pointer-events: none;

	@if $z-index {
		z-index: $z-index;
	}

	@if $direction == "bottom" {
		background: linear-gradient(to top, transparent, $color 90%);
		left: $edge;
		right: $edge;
		top: $edge;
		bottom: calc(100% - $size);
		width: auto;
	}

	@if $direction == "top" {
		background: linear-gradient(to bottom, transparent, $color 90%);
		top: calc(100% - $size);
		left: $edge;
		right: $edge;
		bottom: $edge;
		width: auto;
	}

	@if $direction == "left" {
		background: linear-gradient(to left, transparent, $color 90%);
		top: $edge;
		left: $edge;
		bottom: $edge;
		right: auto;
		width: $size;
		height: auto;
	}

	@if $direction == "right" {
		background: linear-gradient(to right, transparent, $color 90%);
		top: $edge;
		bottom: $edge;
		right: $edge;
		left: auto;
		width: $size;
		height: auto;
	}
}

@mixin _text-heading() {
	font-family: $font-family-headings;
	font-weight: $font-weight-medium;
}

@mixin _text-body() {
	font-family: $font-family-body;
	font-weight: $font-weight-regular;
}

@mixin heading-small() {
	@include _text-heading();
	font-size: $font-size-x-small;
	line-height: $font-line-height-x-small;
}

@mixin heading-medium() {
	@include _text-heading();
	font-size: $font-size-medium;
	line-height: $font-line-height-small;
}

@mixin heading-large() {
	@include _text-heading();
	font-size: $font-size-large;
	line-height: $font-line-height-small;
}

@mixin heading-x-large() {
	@include _text-heading();
	font-size: $font-size-x-large;
	line-height: $font-line-height-medium;
}

@mixin heading-2x-large() {
	@include _text-heading();
	font-size: $font-size-2x-large;
	line-height: $font-line-height-2x-large;
}

@mixin body-small() {
	@include _text-body();
	font-size: $font-size-small;
	line-height: $font-line-height-x-small;
}

@mixin body-medium() {
	@include _text-body();
	font-size: $font-size-medium;
	line-height: $font-line-height-small;
}

@mixin body-large() {
	@include _text-body();
	font-size: $font-size-large;
	line-height: $font-line-height-medium;
}

@mixin body-x-large() {
	@include _text-body();
	font-size: $font-size-x-large;
	line-height: $font-line-height-x-large;
}

/**
 * Breakpoint mixins
 */

@mixin break-xhuge() {
	@media (min-width: #{ ($break-xhuge) }) {
		@content;
	}
}

@mixin break-huge() {
	@media (min-width: #{ ($break-huge) }) {
		@content;
	}
}

@mixin break-wide() {
	@media (min-width: #{ ($break-wide) }) {
		@content;
	}
}

@mixin break-xlarge() {
	@media (min-width: #{ ($break-xlarge) }) {
		@content;
	}
}

@mixin break-large() {
	@media (min-width: #{ ($break-large) }) {
		@content;
	}
}

@mixin break-medium() {
	@media (min-width: #{ ($break-medium) }) {
		@content;
	}
}

@mixin break-small() {
	@media (min-width: #{ ($break-small) }) {
		@content;
	}
}

@mixin break-mobile() {
	@media (min-width: #{ ($break-mobile) }) {
		@content;
	}
}

@mixin break-zoomed-in() {
	@media (min-width: #{ ($break-zoomed-in) }) {
		@content;
	}
}

/**
 * Focus styles.
 */

@mixin block-toolbar-button-style__focus() {
	box-shadow: inset 0 0 0 $border-width $white, 0 0 0 var(--wp-admin-border-width-focus) var(--wp-admin-theme-color);

	// Windows High Contrast mode will show this outline, but not the box-shadow.
	outline: 2px solid transparent;
}

// Tabs, Inputs, Square buttons.
@mixin input-style__neutral() {
	box-shadow: 0 0 0 transparent;

	@media not (prefers-reduced-motion) {
		transition: box-shadow 0.1s linear;
	}

	border-radius: $radius-small;
	border: $border-width solid $gray-600;
}


@mixin input-style__focus($accent-color: var(--wp-admin-theme-color)) {
	border-color: $accent-color;
	// Expand the default border focus style by .5px to be a total of 1.5px.
	box-shadow: 0 0 0 0.5px $accent-color;
	// Windows High Contrast mode will show this outline, but not the box-shadow.
	outline: 2px solid transparent;
}

@mixin button-style__focus() {
	box-shadow: 0 0 0 var(--wp-admin-border-width-focus) var(--wp-admin-theme-color);

	// Windows High Contrast mode will show this outline, but not the box-shadow.
	outline: 2px solid transparent;
}


@mixin button-style-outset__focus($focus-color) {
	box-shadow: 0 0 0 var(--wp-admin-border-width-focus) $white, 0 0 0 calc(2 * var(--wp-admin-border-width-focus)) $focus-color;

	// Windows High Contrast mode will show this outline, but not the box-shadow.
	outline: 2px solid transparent;
	outline-offset: 2px;
}


/**
 * Applies editor left position to the selector passed as argument
 */

@mixin editor-left($selector) {
	#{$selector} { /* Set left position when auto-fold is not on the body element. */
		left: 0;

		@media (min-width: #{ ($break-medium + 1) }) {
			left: $admin-sidebar-width;
		}
	}

	.auto-fold #{$selector} { /* Auto fold is when on smaller breakpoints, nav menu auto collapses. */
		@media (min-width: #{ ($break-medium + 1) }) {
			left: $admin-sidebar-width-collapsed;
		}

		@media (min-width: #{ ($break-large + 1) }) {
			left: $admin-sidebar-width;
		}
	}

	/* Sidebar manually collapsed. */
	.folded #{$selector} {
		left: 0;

		@media (min-width: #{ ($break-medium + 1) }) {
			left: $admin-sidebar-width-collapsed;
		}
	}

	body.is-fullscreen-mode #{$selector} {
		left: 0 !important;
	}
}

/**
 * Styles that are reused verbatim in a few places
 */

// These are additional styles for all captions, when the theme opts in to block styles.
@mixin caption-style() {
	margin-top: 0.5em;
	margin-bottom: 1em;
}

@mixin caption-style-theme() {
	color: #555;
	font-size: $default-font-size;
	text-align: center;

	.is-dark-theme & {
		color: $light-gray-placeholder;
	}
}

/**
 * Allows users to opt-out of animations via OS-level preferences.
 */

@mixin reduce-motion($property: "") {

	@if $property == "transition" {
		@media (prefers-reduced-motion: reduce) {
			transition-duration: 0s;
			transition-delay: 0s;
		}
	} @else if $property == "animation" {
		@media (prefers-reduced-motion: reduce) {
			animation-duration: 1ms;
			animation-delay: 0s;
		}
	} @else {
		@media (prefers-reduced-motion: reduce) {
			transition-duration: 0s;
			transition-delay: 0s;
			animation-duration: 1ms;
			animation-delay: 0s;
		}
	}
}

@mixin input-control($accent-color: var(--wp-admin-theme-color)) {
	font-family: $default-font;
	padding: 6px 8px;
	@include input-style__neutral();

	/* Fonts smaller than 16px causes mobile safari to zoom. */
	font-size: $mobile-text-min-font-size;
	/* Override core line-height. To be reviewed. */
	line-height: normal;
	@include break-small {
		font-size: $default-font-size;
		/* Override core line-height. To be reviewed. */
		line-height: normal;
	}

	&:focus {
		@include input-style__focus($accent-color);
	}

	// Use opacity to work in various editor styles.
	&::-webkit-input-placeholder {
		color: $dark-gray-placeholder;
	}

	&::-moz-placeholder {
		color: $dark-gray-placeholder;
	}

	&:-ms-input-placeholder {
		color: $dark-gray-placeholder;
	}
}

@mixin checkbox-control {
	@include input-control;
	border: $border-width solid $gray-900;
	margin-right: $grid-unit-15;
	transition: none;
	border-radius: $radius-small;

	&:focus {
		box-shadow: 0 0 0 ($border-width * 2) $white, 0 0 0 ($border-width * 2 + $border-width-focus-fallback) var(--wp-admin-theme-color);

		// Only visible in Windows High Contrast mode.
		outline: 2px solid transparent;
	}

	&:checked {
		background: var(--wp-admin-theme-color);
		border-color: var(--wp-admin-theme-color);

		// Hide default checkbox styles in IE.
		&::-ms-check {
			opacity: 0;
		}
	}

	&:checked::before,
	&[aria-checked="mixed"]::before {
		margin: -3px -5px;
		color: $white;

		@include break-medium() {
			margin: -4px 0 0 -5px;
		}
	}

	&[aria-checked="mixed"] {
		background: var(--wp-admin-theme-color);
		border-color: var(--wp-admin-theme-color);

		&::before {
			// Inherited from `forms.css`.
			// See: https://github.com/WordPress/wordpress-develop/tree/5.1.1/src/wp-admin/css/forms.css#L122-L132
			content: "\f460";
			float: left;
			display: inline-block;
			vertical-align: middle;
			width: 16px;
			/* stylelint-disable-next-line font-family-no-missing-generic-family-keyword -- dashicons don't need a generic family keyword. */
			font: normal 30px/1 dashicons;
			speak: none;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;

			@include break-medium() {
				float: none;
				font-size: 21px;
			}
		}
	}

	&[aria-disabled="true"],
	&:disabled {
		background: $gray-100;
		border-color: $gray-300;
		cursor: default;

		// Override style inherited from wp-admin. Required to avoid degraded appearance on different backgrounds.
		opacity: 1;
	}
}

@mixin radio-control {
	@include input-control;
	border: $border-width solid $gray-900;
	margin-right: $grid-unit-15;
	transition: none;
	border-radius: $radius-round;
	width: $radio-input-size-sm;
	height: $radio-input-size-sm;
	min-width: $radio-input-size-sm;
	max-width: $radio-input-size-sm;
	position: relative;

	@include break-small() {
		height: $radio-input-size;
		width: $radio-input-size;
		min-width: $radio-input-size;
		max-width: $radio-input-size;
	}

	&:checked::before {
		box-sizing: inherit;
		width: math.div($radio-input-size-sm, 2);
		height: math.div($radio-input-size-sm, 2);
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		margin: 0;
		background-color: $white;

		// This border serves as a background color in Windows High Contrast mode.
		border: 4px solid $white;

		@include break-small() {
			width: math.div($radio-input-size, 2);
			height: math.div($radio-input-size, 2);
		}
	}

	&:focus {
		box-shadow: 0 0 0 ($border-width * 2) $white, 0 0 0 ($border-width * 2 + $border-width-focus-fallback) var(--wp-admin-theme-color);

		// Only visible in Windows High Contrast mode.
		outline: 2px solid transparent;
	}

	&:checked {
		background: var(--wp-admin-theme-color);
		border: none;
	}
}

/**
 * Reset default styles for JavaScript UI based pages.
 * This is a WP-admin agnostic reset
 */

@mixin reset {
	box-sizing: border-box;

	*,
	*::before,
	*::after {
		box-sizing: inherit;
	}
}

@mixin link-reset {
	&:focus {
		color: var(--wp-admin-theme-color--rgb);
		box-shadow: 0 0 0 var(--wp-admin-border-width-focus) var(--wp-admin-theme-color, #007cba);
		border-radius: $radius-small;
	}
}

// The editor input reset with increased specificity to avoid theme styles bleeding in.
@mixin editor-input-reset() {
	font-family: $editor-html-font !important;
	color: $gray-900 !important;
	background: $white !important;
	padding: $grid-unit-15 !important;
	border: $border-width solid $gray-900 !important;
	box-shadow: none !important;
	border-radius: $radius-small !important;

	// Fonts smaller than 16px causes mobile safari to zoom.
	font-size: $mobile-text-min-font-size !important;
	@include break-small {
		font-size: $default-font-size !important;
	}

	&:focus {
		border-color: var(--wp-admin-theme-color) !important;
		box-shadow: 0 0 0 ($border-width-focus-fallback - $border-width) var(--wp-admin-theme-color) !important;

		// Windows High Contrast mode will show this outline, but not the box-shadow.
		outline: 2px solid transparent !important;
	}
}

/**
 * Reset the WP Admin page styles for Gutenberg-like pages.
 */

@mixin wp-admin-reset( $content-container ) {
	background: $white;

	#wpcontent {
		padding-left: 0;
	}

	#wpbody-content {
		padding-bottom: 0;
	}

	/* We hide legacy notices in Gutenberg Based Pages, because they were not designed in a way that scaled well.
	   Plugins can use Gutenberg notices if they need to pass on information to the user when they are editing. */
	#wpbody-content > div:not(#{ $content-container }):not(#screen-meta) {
		display: none;
	}

	#wpfooter {
		display: none;
	}

	.a11y-speak-region {
		left: -1px;
		top: -1px;
	}

	ul#adminmenu a.wp-has-current-submenu::after,
	ul#adminmenu > li.current > a.current::after {
		border-right-color: $white;
	}

	.media-frame select.attachment-filters:last-of-type {
		width: auto;
		max-width: 100%;
	}
}

@mixin admin-scheme($color-primary) {
	// Define RGB equivalents for use in rgba function.
	// Hexadecimal css vars do not work in the rgba function.
	--wp-admin-theme-color: #{$color-primary};
	--wp-admin-theme-color--rgb: #{hex-to-rgb($color-primary)};
	// Darker shades.
	--wp-admin-theme-color-darker-10: #{color.adjust($color-primary, $lightness: 5%)};
	--wp-admin-theme-color-darker-10--rgb: #{hex-to-rgb(color.adjust($color-primary, $lightness: 5%))};
	--wp-admin-theme-color-darker-20: #{color.adjust($color-primary, $lightness: 10%)};
	--wp-admin-theme-color-darker-20--rgb: #{hex-to-rgb(color.adjust($color-primary, $lightness: 10%))};

	// Focus style width.
	// Avoid rounding issues by showing a whole 2px for 1x screens, and 1.5px on high resolution screens.
	--wp-admin-border-width-focus: 2px;
	@media ( -webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
		--wp-admin-border-width-focus: 1.5px;
	}
}

@mixin wordpress-admin-schemes() {
	body.admin-color-light {
		@include admin-scheme(#0085ba);
	}

	body.admin-color-modern {
		@include admin-scheme($orange-900);
	}

	body.admin-color-blue {
		@include admin-scheme(#096484);
	}

	body.admin-color-coffee {
		@include admin-scheme(#46403c);
	}

	body.admin-color-ectoplasm {
		@include admin-scheme(#523f6d);
	}

	body.admin-color-midnight {
		@include admin-scheme(#e14d43);
	}

	body.admin-color-ocean {
		@include admin-scheme(#627c83);
	}

	body.admin-color-sunrise {
		@include admin-scheme(#dd823b);
	}
}

// Deprecated from UI, kept for back-compat.
@mixin background-colors-deprecated() {
	.has-very-light-gray-background-color {
		background-color: #eee;
	}

	.has-very-dark-gray-background-color {
		background-color: #313131;
	}
}

// Deprecated from UI, kept for back-compat.
@mixin foreground-colors-deprecated() {
	.has-very-light-gray-color {
		color: #eee;
	}

	.has-very-dark-gray-color {
		color: #313131;
	}
}

// Deprecated from UI, kept for back-compat.
@mixin gradient-colors-deprecated() {
	// Our classes uses the same values we set for gradient value attributes.

	/* stylelint-disable @stylistic/function-comma-space-after -- We can not use spacing because of WP multi site kses rule. */
	.has-vivid-green-cyan-to-vivid-cyan-blue-gradient-background {
		background: linear-gradient(135deg,rgba(0,208,132,1) 0%,rgba(6,147,227,1) 100%);
	}

	.has-purple-crush-gradient-background {
		background: linear-gradient(135deg,rgb(52,226,228) 0%,rgb(71,33,251) 50%,rgb(171,29,254) 100%);
	}

	.has-hazy-dawn-gradient-background {
		background: linear-gradient(135deg,rgb(250,172,168) 0%,rgb(218,208,236) 100%);
	}

	.has-subdued-olive-gradient-background {
		background: linear-gradient(135deg,rgb(250,250,225) 0%,rgb(103,166,113) 100%);
	}

	.has-atomic-cream-gradient-background {
		background: linear-gradient(135deg,rgb(253,215,154) 0%,rgb(0,74,89) 100%);
	}

	.has-nightshade-gradient-background {
		background: linear-gradient(135deg,rgb(51,9,104) 0%,rgb(49,205,207) 100%);
	}

	.has-midnight-gradient-background {
		background: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);
	}
	/* stylelint-enable @stylistic/function-comma-space-after */
}

@mixin custom-scrollbars-on-hover($handle-color, $handle-color-hover) {

	// WebKit
	&::-webkit-scrollbar {
		width: 12px;
		height: 12px;
	}
	&::-webkit-scrollbar-track {
		background-color: transparent;
	}
	&::-webkit-scrollbar-thumb {
		background-color: $handle-color;
		border-radius: 8px;
		border: 3px solid transparent;
		background-clip: padding-box;
	}
	&:hover::-webkit-scrollbar-thumb, // This needs specificity.
	&:focus::-webkit-scrollbar-thumb,
	&:focus-within::-webkit-scrollbar-thumb {
		background-color: $handle-color-hover;
	}

	// Firefox 109+ and Chrome 111+
	scrollbar-width: thin;
	scrollbar-gutter: stable both-edges;
	scrollbar-color: $handle-color transparent; // Syntax, "dark", "light", or "#handle-color #track-color"

	&:hover,
	&:focus,
	&:focus-within {
		scrollbar-color: $handle-color-hover transparent;
	}

	// Needed to fix a Safari rendering issue.
	will-change: transform;

	// Always show scrollbar on Mobile devices.
	@media (hover: none) {
		& {
			scrollbar-color: $handle-color-hover transparent;
		}
	}
}

@mixin selected-block-outline($widthRatio: 1) {
	outline-color: var(--wp-admin-theme-color);
	outline-style: solid;
	outline-width: calc(#{$widthRatio} * (var(--wp-admin-border-width-focus) / var(--wp-block-editor-iframe-zoom-out-scale, 1)));
	outline-offset: calc(#{$widthRatio} * ((-1 * var(--wp-admin-border-width-focus) ) / var(--wp-block-editor-iframe-zoom-out-scale, 1)));
}

@mixin selected-block-focus($widthRatio: 1) {
	content: "";
	position: absolute;
	pointer-events: none;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	@include selected-block-outline($widthRatio);
}
